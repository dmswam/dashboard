/* dashboard_erp.css */

/* --- RESET BROWSER DEFAULTS DAN PENGATURAN GLOBAL --- */
*, *::before, *::after {
  box-sizing: border-box; /* Sangat penting untuk layout responsif */
}

html, body {
  margin: 0;
  padding: 0;
  width: 100%;
  height: 100%;
  /* Mencegah scroll horizontal pada seluruh halaman */
  overflow-x: hidden !important; /* Dikuatkan dengan !important */
  font-family: Arial, sans-serif;
  line-height: 1.6;
  color: #333;
  background-color: #f4f7f6; /* Warna latar belakang halaman */
}

/* --- HEADER UTAMA --- */
.main-header {
  width: 100%;
  background-color: #fff;
  padding: 10px 20px;
  box-shadow: 0 2px 4px rgba(0,0,0,0.1);
  display: flex;
  justify-content: space-between;
  align-items: center;
  position: fixed;
  top: 0;
  left: 0;
  z-index: 200;
  height: 60px;
}

.header-left {
  display: flex;
  align-items: center;
  gap: 15px;
}

.company-logo {
  height: 40px; /* Sesuaikan tinggi logo */
  width: auto;
}

.header-right {
  display: flex;
  align-items: center;
}

/* --- TOMBOL MENU HAMBURGER (Mobile Only) --- */
.mobile-menu-toggle {
  display: none; /* Sembunyikan secara default di desktop */
  background: none;
  border: none;
  font-size: 1.8em;
  cursor: pointer;
  color: #01386A;
  padding: 5px 10px;
}

/* --- DROPDOWN PROFIL (di header) --- */
.user-profile-area {
  list-style: none;
  padding: 0;
  margin: 0;
}

.profile-dropdown-trigger {
  position: relative;
  cursor: pointer;
  display: flex;
  align-items: center;
}

#ic {
  width: 45px;
  height: 45px;
  border-radius: 50%;
  object-fit: cover;
  display: block;
}

.dropdown-logo {
  display: none; /* Sembunyikan secara default */
  
  position: absolute; /* Tetap absolute untuk dropdown profil */
  background-color: #fff; /* Ubah ke putih bersih */
  border-radius: 8px; /* Sudut sedikit membulat */
  min-width: 150px; /* Lebar minimum sedikit lebih luas */
  box-shadow: 0 4px 12px rgba(0,0,0,0.15); /* Shadow lebih lembut dan modern */
  list-style: none;
  padding: 8px 0; /* Padding vertikal di dalam dropdown */
  margin: 0;
  z-index: 20; /* Lebih tinggi dari z-index dropdown sidebar */
  top: calc(100% + 10px); /* Jarak dari pemicu sedikit lebih jauh */
  right: 0;
}

.dropdown-logo.show {
  display: block; /* Tampilkan langsung */
  overflow: visible; /* Penting: tidak ada scrollbar internal */
}

.dropdown-logo li a {
  color: #333; /* Warna teks lebih netral */
  padding: 10px 15px; /* Padding item lebih nyaman */
  text-decoration: none;
  display: block;
  white-space: nowrap;
  font-size: 0.95em; /* Ukuran font sedikit lebih besar */
}

.dropdown-logo li a:hover {
  background-color: #f0f0f0; /* Warna hover lebih terang */
  border-radius: 4px; /* Sudut membulat saat hover */
  margin: 0 8px; /* Memberi sedikit jarak dari tepi dropdown */
}

/* --- LAYOUT UTAMA (Sidebar Navigasi dan Konten Dashboard) --- */
.main-layout-container {
  display: flex;
  height: calc(100vh - 60px); /* Tinggi viewport dikurangi tinggi header */
  margin-top: 60px; /* Dorong konten ke bawah header */
  width: 100%; /* Penting untuk responsivitas */
  /* Pastikan tidak ada overflow yang tidak diinginkan di sini */
  overflow: hidden; /* Menambah overflow hidden untuk container utama */
}

/* --- SIDEBAR NAVIGASI UTAMA --- */
.sidebar-nav {
  width: 250px; /* Lebar default di desktop */
  background-color: #fff;
  box-shadow: 2px 0 5px rgba(0,0,0,0.1);
  height: 100%; /* Mengisi tinggi penuh .main-layout-container */
  flex-shrink: 0; /* Mencegah sidebar menyusut */
  overflow-y: hidden; /* MENGHILANGKAN SCROLLBAR PADA SIDEBAR UTAMA SECARA DEFAULT DI DESKTOP */
  transition: transform 0.3s ease-in-out; /* Untuk animasi slide-in/out mobile */
  z-index: 150; /* Di atas konten, di bawah header */
  padding-top: 10px; /* Padding dari atas */
}

/* Tambahkan kelas ini untuk menonaktifkan scroll sidebar saat dropdown terbuka di mobile */
.sidebar-nav.no-scroll {
  overflow-y: hidden !important; /* Paksa hidden saat no-scroll aktif */
}

.isi-container {
  list-style: none;
  padding: 0 15px; /* Padding horizontal di dalam sidebar */
  margin: 0;
  width: 100%;
}

/* --- ITEM MENU UTAMA (Dashboard, Perusahaan, Finance, dll.) --- */
.isi-container > li {
  display: flex;
  align-items: center;
  position: relative; /* Penting: Agar item menu bisa menjadi parent untuk positioning relative jika diperlukan */
  cursor: pointer;
  margin-bottom: 20px;
  padding: 8px 0;
  transition: background-color 0.2s ease-in-out; /* Tambah transisi hover untuk item menu */
  border-radius: 6px; /* Sudut sedikit membulat untuk item menu */
}

.isi-container > li:hover {
  background-color: #e8f0fe; /* Warna latar belakang saat hover pada item menu */
}

.dashboard {
  margin-top: 0;
}

.isi-container > li img {
  margin-right: 10px;
  width: 30px;
  height: 30px;
  flex-shrink: 0;
}

.isi-container > li a {
  text-decoration: none;
  color: #01386A;
  font-weight: bold;
  flex-grow: 1;
  white-space: nowrap;
}

/* --- DROPDOWN UMUM (Utama dan Bersarang) --- */
.dropdown,
.dropdown-nested {
  display: none; /* Sembunyikan secara default */

  background-color: #fff; /* Ubah ke putih bersih */
  border-radius: 8px; /* Sudut sedikit membulat */
  min-width: 200px; /* Lebar minimum dropdown sidebar lebih sesuai */
  box-shadow: 0 4px 12px rgba(0,0,0,0.15); /* Shadow lebih lembut dan modern */
  list-style: none;
  padding: 8px 0; /* Padding vertikal di dalam dropdown */
  margin: 0;
  
  /* PENTING: Position fixed untuk overlaying */
  position: fixed; 
  z-index: 100; /* Pastikan di atas konten dashboard tapi di bawah header */

  /* Defaultnya di luar layar */
  left: -9999px;
  top: -9999px;
}

/* Saat dropdown aktif */
.dropdown.show,
.dropdown-nested.show {
  display: block; /* Tampilkan langsung */
  overflow: visible; /* PENTING: dropdown tidak akan punya scrollbar internal */
  /* Posisi `left` dan `top` akan diatur oleh JS */
}

.dropdown li,
.dropdown-nested li {
  padding: 0; /* Reset padding pada LI agar padding pada A yang bekerja */
}

.dropdown li a,
.dropdown-nested li a {
  color: #333; /* Warna teks lebih netral */
  padding: 10px 15px; /* Padding item lebih nyaman */
  text-decoration: none;
  display: block;
  white-space: nowrap; /* Pastikan teks tidak melompat baris jika terlalu panjang */
  font-size: 0.95em; /* Ukuran font sedikit lebih besar */
}

.dropdown li a:hover,
.dropdown-nested li a:hover {
  background-color: #f0f0f0; /* Warna hover lebih terang */
  border-radius: 4px; /* Sudut membulat saat hover */
  margin: 0 8px; /* Memberi sedikit jarak dari tepi dropdown */
}

/* Untuk nested dropdown, tingkatkan z-index agar selalu di atas parent dropdown */
.dropdown-nested {
  z-index: 105; /* Sedikit lebih tinggi dari dropdown parent */
}

/* Menghapus semua aturan :hover yang menampilkan dropdown, karena akan ditangani oleh JS */
.perusahaan:hover .dropdown, .finance:hover .dropdown, .sales:hover .dropdown,
.procurement:hover .dropdown, .warehouse:hover .dropdown, .production:hover .dropdown,
.human:hover .dropdown, .dropdown li:hover .dropdown-nested {
  display: none; /* Pastikan defaultnya tersembunyi */
}

/* --- KONTEN UTAMA DASHBOARD --- */
.dashboard-content {
  flex-grow: 1;
  padding: 20px;
  overflow-y: auto; /* Memungkinkan konten dashboard di-scroll jika panjang */
  box-sizing: border-box;
  height: 100%;
  display: flex;
  flex-direction: column; /* Mengatur main-content dan sidebar (kanan) secara vertikal */
  gap: 20px;
}

.main-content {
  display: flex;
  flex-wrap: wrap;
  gap: 20px;
  flex-grow: 1;
}

.card {
  background-color: #fff;
  border-radius: 8px;
  box-shadow: 0 4px 8px rgba(0,0,0,0.1);
  padding: 20px;
  min-width: 300px;
  box-sizing: border-box;
  flex: 1;
}

.sales-chart-card {
  flex-basis: 100%;
  height: 400px;
  display: flex;
  flex-direction: column;
}
#salesChart {
  flex-grow: 1;
  max-height: 320px;
}

.period-display {
  text-align: right;
  font-size: 0.9em;
  color: #666;
  margin-top: 10px;
}

.bottom-row {
  display: flex;
  flex-wrap: wrap;
  gap: 20px;
  width: 100%;
}

.production-card {
  flex: 1;
  min-width: 300px;
}

.product-item {
  display: flex;
  align-items: center;
  margin-bottom: 10px;
  font-size: 0.9em;
}

.product-item span {
  flex-basis: 100px; /* Lebar tetap untuk nama produk */
  margin-right: 15px;
  white-space: nowrap;
}

.progress-bar-container {
  flex-grow: 1;
  background-color: #e0e0e0;
  border-radius: 5px;
  height: 20px;
  overflow: hidden; /* Penting untuk memastikan bar di dalam container */
}

.progress-bar {
  height: 100%;
  text-align: center;
  color: white;
  line-height: 20px;
  border-radius: 5px;
  transition: width 0.5s ease-in-out;
  font-size: 0.8em;
}

.warehouse-map-card {
  flex: 2;
  min-width: 400px;
  display: flex;
  flex-direction: column;
}

.map-container {
  height: 300px;
  width: 100%;
  border: 1px solid #ddd;
  border-radius: 4px;
  background-color: #f0f0f0; /* Placeholder for map */
  display: flex;
  justify-content: center;
  align-items: center;
  color: #999;
}

/* --- SIDEBAR KONTEN (Forum Diskusi) --- */
.sidebar {
  width: 280px; /* Lebar default di desktop */
  background-color: #f8f8f8;
  padding: 20px;
  box-shadow: -2px 0 5px rgba(0,0,0,0.1);
  flex-shrink: 0;
  height: fit-content; /* Biarkan tinggi menyesuaikan konten */
  box-sizing: border-box;
}

.forum-header {
  display: flex;
  justify-content: space-between;
  align-items: center;
  margin-bottom: 15px;
  border-bottom: 1px solid #eee;
  padding-bottom: 10px;
}

.forum-card h3 {
  margin: 0;
  color: #4CAF50;
  font-size: 1.2em;
}

.forum-button {
  background: none;
  border: none;
  font-size: 1.2em;
  cursor: pointer;
  padding: 5px;
  border-radius: 50%;
  transition: background-color 0.2s;
}
.forum-button:hover {
  background-color: #e0e0e0;
}
.forum-icon-header {
  width: 20px;
  height: 20px;
  opacity: 0.7;
}

.forum-list {
  list-style: none;
  padding: 0;
  margin: 0;
}

.forum-item {
  display: flex;
  align-items: center;
  margin-bottom: 15px;
  padding: 8px 0;
}

.forum-item:last-child {
  border-bottom: none;
  margin-bottom: 0;
}

.forum-avatar {
  width: 45px;
  height: 45px;
  border-radius: 50%;
  object-fit: cover;
  margin-right: 12px;
  border: 2px solid #007bff;
}

.forum-details {
  flex-grow: 1;
}

.forum-details h4 {
  margin: 0;
  font-size: 1em;
  color: #333;
}

.forum-details .status {
  font-size: 0.8em;
  font-weight: bold;
  text-transform: uppercase;
}
.forum-details .status.online {
  color: #28a745;
}
.forum-details .status.offline {
  color: #dc3545;
}


/* ========================================================= */
/* --- MEDIA QUERIES UNTUK RESPONSIVITAS --- */
/* ========================================================= */

/* Untuk layar dengan lebar maksimum 1200px (misalnya, laptop kecil atau tablet landscape) */
@media (max-width: 1200px) {
  .main-header {
      padding: 10px 15px;
  }
  .dashboard-content {
      padding: 15px;
  }
  .card {
      min-width: 280px;
  }
  .warehouse-map-card {
      min-width: 350px; /* Sedikit kurangi min-width */
  }
}

/* Untuk layar dengan lebar maksimum 992px (misalnya, tablet portrait) */
@media (max-width: 992px) {
  .main-layout-container {
      flex-direction: column; /* Stack sidebar dan konten secara vertikal */
      height: auto; /* Biarkan tinggi menyesuaikan konten */
      margin-top: 60px; /* Pastikan konten tidak tumpang tindih dengan header */
      width: 100%; /* Pastikan mengambil lebar penuh */
      overflow-x: hidden !important; /* Pastikan juga tidak ada scroll horizontal di mobile */
  }

  .mobile-menu-toggle {
      display: block; /* Tampilkan tombol hamburger */
  }

  .sidebar-nav {
      width: 250px; /* Tetapkan lebar untuk sidebar saat dibuka di mobile */
      height: calc(100vh - 60px); /* Tinggi sidebar mengambil sisa tinggi viewport */
      position: fixed; /* Tetap fixed untuk mobile menu agar melayang */
      top: 60px; /* Di bawah header */
      left: 0;
      transform: translateX(-100%); /* Sembunyikan di luar layar secara default */
      transition: transform 0.3s ease-in-out;
      z-index: 150;
      padding-top: 0; /* Reset padding-top */
      /* overflow-y: auto; */ /* Komentar ini karena kita akan mengontrolnya via JS */
      -webkit-overflow-scrolling: touch; /* Memungkinkan scroll yang lebih mulus di iOS */
  }

  /* Hilangkan scrollbar default di mobile, kita atur via JS class no-scroll */
  .sidebar-nav::-webkit-scrollbar {
      display: none; /* Sembunyikan scrollbar webkit */
  }
  .sidebar-nav {
      scrollbar-width: none; /* Sembunyikan scrollbar untuk Firefox */
  }

  .sidebar-nav.active {
      transform: translateX(0); /* Tampilkan sidebar saat aktif */
  }

  .isi-container {
      padding: 15px; /* Sesuaikan padding */
  }
  .isi-container > li {
      margin-bottom: 15px; /* Kurangi jarak antar menu */
  }
  .isi-container > li img {
      width: 25px; /* Ukuran ikon lebih kecil */
      height: 25px;
  }
  .isi-container > li a {
      font-size: 0.9em; /* Ukuran font lebih kecil */
  }

  /* Penyesuaian dropdown untuk mobile sidebar */
  /* Di mobile, dropdown biasanya muncul di bawah item induk, bukan di samping */
  .dropdown, .dropdown-nested {
      position: relative; /* Ubah ke relative agar muncul di bawah induk */
      left: auto; /* Hapus positioning left */
      top: auto; /* Hapus positioning top */
      width: 100%; /* Ambil lebar penuh parent */
      min-width: unset; /* Hapus min-width */
      background-color: #f6f6f6; /* Warna latar belakang dropdown di mobile */
      box-shadow: none; /* Hapus shadow di dropdown mobile agar lebih bersih */
      border-top: 1px solid #eee; /* Beri sedikit pemisah */
      padding-left: 20px; /* Indentasi untuk sub-menu */
      overflow: visible; /* Pastikan ini visible untuk dropdown di mobile juga */
      z-index: 1; /* Kembali ke z-index normal untuk mobile */
  }

  .dropdown-nested {
      padding-left: 40px; /* Indentasi lebih dalam untuk nested */
  }

  .dropdown li a, .dropdown-nested li a {
      padding: 8px 15px; /* Sesuaikan padding untuk item dropdown di mobile */
      font-size: 0.9em;
  }

  .dashboard-content {
      margin-left: 0; /* Hapus margin kiri */
      padding: 15px;
      height: auto; /* Tinggi menyesuaikan konten */
      overflow-y: visible; /* Biarkan body yang menangani scroll utama */
  }

  .main-content {
      flex-direction: column; /* Card stack vertikal */
      gap: 15px; /* Kurangi jarak antar card */
  }

  .card {
      min-width: unset; /* Hapus min-width */
      width: 100%; /* Card mengambil seluruh lebar */
      padding: 15px; /* Kurangi padding card */
  }

  .sales-chart-card {
      height: 350px;
  }
  #salesChart {
      max-height: 280px;
  }

  .bottom-row {
      flex-direction: column;
      gap: 15px;
  }

  .production-card, .warehouse-map-card {
      min-width: unset;
      flex: none;
      width: 100%;
  }
  .warehouse-map-card .map-container {
      height: 250px;
  }

  .sidebar {
      width: 100%;
      height: auto;
      margin-top: 20px;
      position: relative;
      box-shadow: 0 -2px 5px rgba(0,0,0,0.1);
      overflow-y: visible;
  }
}

/* Untuk layar dengan lebar maksimum 768px (misalnya, ponsel besar atau tablet kecil) */
@media (max-width: 768px) {
  .main-header {
      padding: 8px 10px;
      height: 55px;
  }
  .company-logo {
      height: 35px;
  }
  #ic {
      width: 40px;
      height: 40px;
  }
  .mobile-menu-toggle {
      font-size: 1.5em;
  }
  .sidebar-nav {
      top: 55px;
      height: calc(100vh - 55px);
  }
  .main-layout-container {
      margin-top: 55px;
  }

  .dashboard-content {
      padding: 10px;
  }
  .card h2, .card h3 {
      font-size: 1.2em;
  }
  .sales-chart-card {
      height: 300px;
  }
  #salesChart {
      max-height: 220px;
  }
  .warehouse-map-card .map-container {
      height: 200px;
  }
  .forum-avatar {
      width: 40px;
      height: 40px;
  }
  .forum-details h4 {
      font-size: 0.95em;
  }
  .forum-details .status {
      font-size: 0.8em;
  }
}

/* Untuk layar dengan lebar maksimum 576px (misalnya, ponsel kecil) */
@media (max-width: 576px) {
  .main-header {
      height: 50px;
      padding: 5px 10px;
  }
  .sidebar-nav {
      top: 50px;
      width: 100%;
      height: calc(100vh - 50px);
  }
  .main-layout-container {
      margin-top: 50px;
  }
  .header-left {
      gap: 8px;
  }
  .company-logo {
      height: 28px;
  }
  #ic {
      width: 32px;
      height: 32px;
  }
  .mobile-menu-toggle {
      font-size: 1.2em;
      padding: 3px 8px;
  }

  .isi-container {
      padding: 10px;
  }
  .isi-container > li {
      margin-bottom: 12px;
      padding: 6px 0;
  }
  .isi-container > li img {
      width: 22px;
      height: 22px;
  }
  .isi-container > li a {
      font-size: 0.85em;
  }

  .dropdown li a, .dropdown-nested li a {
      padding: 6px 12px;
      font-size: 0.8em;
  }

  .dashboard-content {
      padding: 10px;
      gap: 12px;
  }
  .card {
      padding: 12px;
  }
  .card h2, .card h3 {
      font-size: 1.0em;
      margin-bottom: 10px;
  }
  .sales-chart-card {
      height: 250px;
  }
  #salesChart {
      max-height: 180px;
  }
  .warehouse-map-card .map-container {
      height: 180px;
  }
  .forum-avatar {
      width: 35px;
      height: 35px;
  }
  .forum-details h4 {
      font-size: 0.85em;
  }
  .forum-details .status {
      font-size: 0.7em;
  }
}
